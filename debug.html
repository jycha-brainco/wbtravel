<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Debug - main.js 실행 테스트</title>
  <link rel="stylesheet" href="/style.css" />
  <style>#debugLog{position:fixed;bottom:0;left:0;right:0;max-height:50vh;overflow:auto;background:#111;color:#0f0;font-family:monospace;font-size:13px;padding:16px;z-index:9999;line-height:1.6;} .derr{color:#f44;} .dwarn{color:#fa0;}</style>
</head>
<body>
  <div id="nav-placeholder"></div>

  <div style="padding:100px 20px 20px;">
    <h2>Portfolio Grid Test</h2>
    <div class="pf-grid" id="portfolioGrid"></div>
    <h2 style="margin-top:40px;">Clients Grid Test</h2>
    <div id="clientsGrid"></div>
    <h2 style="margin-top:40px;">Timeline Test</h2>
    <div class="timeline" id="historyTimeline"></div>
  </div>

  <div id="footer-placeholder"></div>
  <div id="debugLog"></div>

  <script>
    // Intercept console to show in page
    const dlog = document.getElementById('debugLog');
    const origLog = console.log, origErr = console.error, origWarn = console.warn;
    console.log = function() { origLog.apply(console, arguments); dlog.innerHTML += '<div>' + Array.from(arguments).join(' ') + '</div>'; };
    console.error = function() { origErr.apply(console, arguments); dlog.innerHTML += '<div class="derr">ERROR: ' + Array.from(arguments).join(' ') + '</div>'; };
    console.warn = function() { origWarn.apply(console, arguments); dlog.innerHTML += '<div class="dwarn">WARN: ' + Array.from(arguments).join(' ') + '</div>'; };
    window.addEventListener('error', e => { dlog.innerHTML += '<div class="derr">JS ERROR: ' + e.message + ' at ' + e.filename + ':' + e.lineno + '</div>'; });
    window.addEventListener('unhandledrejection', e => { dlog.innerHTML += '<div class="derr">PROMISE ERROR: ' + e.reason + '</div>'; });
    console.log('Debug page loaded, pathname: ' + window.location.pathname);
  </script>
  <script>
    // Override getCurrentPage to force all renders
    console.log('Loading main.js...');
  </script>
  <script src="/main.js"></script>
  <script>
    console.log('main.js loaded successfully');
    console.log('siteConfig:', typeof siteConfig, siteConfig);
    console.log('DataStore:', typeof DataStore);

    // Force render all sections regardless of page detection
    (async () => {
      console.log('Force rendering all sections...');
      try {
        console.log('Rendering portfolio...');
        await renderPortfolio();
        console.log('Portfolio done. Grid innerHTML length: ' + document.getElementById('portfolioGrid').innerHTML.length);
      } catch(e) { console.error('renderPortfolio failed: ' + e.message); }

      try {
        console.log('Rendering clients...');
        await renderClients('clientsGrid');
        console.log('Clients done. Grid innerHTML length: ' + document.getElementById('clientsGrid').innerHTML.length);
      } catch(e) { console.error('renderClients failed: ' + e.message); }

      try {
        console.log('Rendering timeline...');
        await renderTimeline();
        console.log('Timeline done.');
      } catch(e) { console.error('renderTimeline failed: ' + e.message); }

      console.log('All renders complete.');
    })();
  </script>
</body>
</html>
